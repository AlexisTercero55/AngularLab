name: build_deploy_Angular

on:
    push:
      branches: [ " " ]
    pull_request:
      branches: [ " " ]
  
permissions:
    contents: write  # This gives the GITHUB_TOKEN permission to push on gh-pages 

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [12.15.0]

    steps:
     - uses: actions/checkout@v4
     - name: Use Node.js ${{ matrix.node-version }}
       uses: actions/setup-node@v4
       with:
            node-version: ${{ matrix.node-version }} #12.15.0
            cache: 'npm'
     - name: Install Angular CLI
       run: npm install --global @angular/cli@9.0.1

     - name: Install dependencies #ensure package-lock.json
       run: npm ci 

     - name: Build Angular project
       run: npm run-script deploy

     - name: Deploy
       uses: JamesIves/github-pages-deploy-action@releases/v3
       with:
         GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
         BRANCH: gh-pages
         FOLDER: dist/todo
         CLEAN: true 